<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>2 Games in 1 - Play Now</title>
<style>
  body {
    margin: 0; font-family: Arial, sans-serif; background: #121212; color: white; text-align: center;
  }
  h1 { margin-top: 30px; }
  #menu, #game1, #game2 {
    display: none;
  }
  .active {
    display: block;
  }
  .game-option {
    background: #222; border-radius: 12px; margin: 20px auto; padding: 20px; max-width: 300px; cursor: pointer;
    transition: background 0.3s;
  }
  .game-option:hover {
    background: #444;
  }
  button {
    margin: 15px 5px; padding: 10px 20px; font-size: 16px; border-radius: 6px; border: none; cursor: pointer;
    background-color: #1db954; color: white;
  }
  canvas {
    background: #333; border-radius: 12px; margin: 20px auto; display: block;
    touch-action: none;
  }
  #touchControls {
    margin-top: 10px;
  }
  .touch-btn {
    font-size: 24px; padding: 12px 20px; margin: 5px;
    border-radius: 8px;
    background: #1db954;
    border: none;
    color: white;
    user-select: none;
  }
</style>
</head>
<body>

<h1>Choose a Game to Play</h1>

<div id="menu" class="active">
  <div class="game-option" onclick="startGame(1)">▶️ Play Car Racer</div>
  <div class="game-option" onclick="startGame(2)">▶️ Play Snake Game</div>
</div>

<!-- Game 1: Car Racer -->
<div id="game1">
  <h2>Car Racer</h2>
  <canvas id="carCanvas" width="300" height="500"></canvas><br />
  <div id="carControls">
    <button class="touch-btn" id="carLeft">⬅️ Left</button>
    <button class="touch-btn" id="carRight">➡️ Right</button>
  </div>
  <button onclick="restartCarGame()">Restart</button>
  <button onclick="backToMenu()">Back to Menu</button>
</div>

<!-- Game 2: Snake -->
<div id="game2">
  <h2>Snake Game</h2>
  <canvas id="snakeCanvas" width="300" height="300"></canvas><br />
  <button onclick="restartSnakeGame()">Restart</button>
  <button onclick="backToMenu()">Back to Menu</button>
</div>

<script>
  // Show selected game and hide others
  function startGame(num) {
    document.getElementById('menu').classList.remove('active');
    if(num === 1) {
      document.getElementById('game1').classList.add('active');
      restartCarGame();
    } else if(num === 2) {
      document.getElementById('game2').classList.add('active');
      restartSnakeGame();
    }
  }
  function backToMenu() {
    document.getElementById('game1').classList.remove('active');
    document.getElementById('game2').classList.remove('active');
    document.getElementById('menu').classList.add('active');
  }

  // ==== Game 1: Car Racer ====
  const carCanvas = document.getElementById('carCanvas');
  const carCtx = carCanvas.getContext('2d');
  let carX, carY, carWidth, carHeight;
  let keys = {};
  let carSpeed = 5;
  let obstacles = [];
  let score = 0;
  let game1Running = false;

  function restartCarGame() {
    carX = carCanvas.width / 2 - 20;
    carY = carCanvas.height - 100;
    carWidth = 40;
    carHeight = 80;
    keys = {};
    obstacles = [];
    score = 0;
    game1Running = true;
    spawnObstacle();
    updateCarGame();
  }

  // Handle keyboard input for car game
  document.addEventListener('keydown', e => {
    if(game1Running) keys[e.key] = true;
  });
  document.addEventListener('keyup', e => {
    if(game1Running) keys[e.key] = false;
  });

  // Touch buttons for car game
  document.getElementById('carLeft').addEventListener('touchstart', e => { keys['ArrowLeft'] = true; e.preventDefault(); });
  document.getElementById('carLeft').addEventListener('touchend', e => { keys['ArrowLeft'] = false; e.preventDefault(); });
  document.getElementById('carRight').addEventListener('touchstart', e => { keys['ArrowRight'] = true; e.preventDefault(); });
  document.getElementById('carRight').addEventListener('touchend', e => { keys['ArrowRight'] = false; e.preventDefault(); });

  function drawCar() {
    carCtx.fillStyle = 'red';
    carCtx.fillRect(carX, carY, carWidth, carHeight);
  }

  function spawnObstacle() {
    const width = 40 + Math.random() * 50;
    const x = Math.random() * (carCanvas.width - width);
    obstacles.push({x: x, y: -100, width: width, height: 30});
  }

  function drawObstacles() {
    carCtx.fillStyle = 'yellow';
    obstacles.forEach(obs => {
      carCtx.fillRect(obs.x, obs.y, obs.width, obs.height);
    });
  }

  function updateObstacles() {
    for(let i = obstacles.length - 1; i >= 0; i--) {
      obstacles[i].y += 5;
      if(obstacles[i].y > carCanvas.height) {
        obstacles.splice(i, 1);
        score++;
        spawnObstacle();
      }
    }
  }

  function checkCollision() {
    for(let obs of obstacles) {
      if(carX < obs.x + obs.width &&
         carX + carWidth > obs.x &&
         carY < obs.y + obs.height &&
         carHeight + carY > obs.y) {
           return true;
         }
    }
    return false;
  }

  function updateCarGame() {
    if(!game1Running) return;
    carCtx.clearRect(0, 0, carCanvas.width, carCanvas.height);

    // Move car
    if(keys['ArrowLeft'] && carX > 0) carX -= carSpeed;
    if(keys['ArrowRight'] && carX < carCanvas.width - carWidth) carX += carSpeed;

    drawCar();
    drawObstacles();
    updateObstacles();

    carCtx.fillStyle = 'white';
    carCtx.font = '18px Arial';
    carCtx.fillText('Score: ' + score, 10, 20);

    if(checkCollision()) {
      game1Running = false;
      carCtx.fillStyle = 'red';
      carCtx.font = '36px Arial';
      carCtx.fillText('Game Over!', 80, carCanvas.height / 2);
      return;
    }

    requestAnimationFrame(updateCarGame);
  }

  // ==== Game 2: Snake ====
  const snakeCanvas = document.getElementById('snakeCanvas');
  const snakeCtx = snakeCanvas.getContext('2d');
  const gridSize = 20;
  const tileCount = snakeCanvas.width / gridSize;
  let snake = [];
  let velocityX, velocityY;
  let foodX, foodY;
  let snakeLength;
  let game2Running = false;

  function restartSnakeGame() {
    snake = [{x: 10, y: 10}];
    velocityX = 0;
    velocityY = 0;
    snakeLength = 5;
    placeFood();
    game2Running = true;
    updateSnakeGame();
  }

  function placeFood() {
    foodX = Math.floor(Math.random() * tileCount);
    foodY = Math.floor(Math.random() * tileCount);
  }

  function drawSnake() {
    snakeCtx.fillStyle = 'lime';
    for(let part of snake) {
      snakeCtx.fillRect(part.x * gridSize, part.y * gridSize, gridSize-2, gridSize-2);
    }
  }

  function drawFood() {
    snakeCtx.fillStyle = 'red';
    snakeCtx.fillRect(foodX * gridSize, foodY * gridSize, gridSize-2, gridSize-2);
  }

  document.addEventListener('keydown', e => {
    if(!game2Running) return;
    if(e.key === 'ArrowUp' && velocityY === 0) {
      velocityX = 0; velocityY = -1;
    } else if(e.key === 'ArrowDown' && velocityY === 0) {
      velocityX = 0; velocityY = 1;
    } else if(e.key === 'ArrowLeft' && velocityX === 0) {
      velocityX = -1; velocityY = 0;
    } else if(e.key === 'ArrowRight' && velocityX === 0) {
      velocityX = 1; velocityY = 0;
    }
  });

  // Touch controls for snake swipe
  let touchStartX = null;
  let touchStartY = null;
  snakeCanvas.addEventListener('touchstart', e => {
    let touch = e.touches[0];
    touchStartX = touch.clientX;
    touchStartY = touch.clientY;
  });
  snakeCanvas.addEventListener('touchend', e => {
    if(!game2Running) return;
    let touch = e.changedTouches[0];
    let dx = touch.clientX - touchStartX;
    let dy = touch.clientY - touchStartY;
    if(Math.abs(dx) > Math.abs(dy)) {
      if(dx > 30 && velocityX === 0) { velocityX = 1; velocityY = 0; }
      else if(dx < -30 && velocityX === 0) { velocityX = -1; velocityY = 0; }
    } else {
      if(dy > 30 && velocityY === 0) { velocityX = 0; velocityY = 1; }
      else if(dy < -30 && velocityY === 0) { velocityX = 0; velocityY = -1; }
    }
  });

  function updateSnakeGame() {
    if(!game2Running) return;
    snakeCtx.clearRect(0, 0, snakeCanvas.width, snakeCanvas.height);

    // Move snake head
    let head = {...snake[0]};
    head.x += velocityX;
    head.y += velocityY;

    // Wall collision - wrap around
    if(head.x < 0) head.x = tileCount -1;
    if(head.x >= tileCount) head.x = 0;
    if(head.y < 0) head.y = tileCount -1;
    if(head.y >= tileCount) head.y = 0;

    // Check collision with self
    for(let part of snake) {
      if(part.x === head.x && part.y === head.y) {
        game2Running = false;
        snakeCtx.fillStyle = 'red';
        snakeCtx.font = '30px Arial';
        snakeCtx.fillText('Game Over!', 70, snakeCanvas.height / 2);
        return;
      }
    }

    snake.unshift(head);

    // Check food collision
    if(head.x === foodX && head.y === foodY) {
      snakeLength++;
      placeFood();
    }

    // Keep snake length
    while(snake.length > snakeLength) {
      snake.pop();
    }

    drawFood();
    drawSnake();

    requestAnimationFrame(updateSnakeGame);
  }
</script>

</body>
</html>
